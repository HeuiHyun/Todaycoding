# This Python 3 environment comes with many helpful analytics libraries installed
# It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python
# For example, here's several helpful packages to load

import numpy as np # linear algebra
import pandas as pd # data processing, CSV file I/O (e.g. pd.read_csv)

# Input data files are available in the read-only "../input/" directory
# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory

import os
for dirname, _, filenames in os.walk('/kaggle/input'):
    for filename in filenames:
        print(os.path.join(dirname, filename))

# You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using "Save & Run All" 
# You can also write temporary files to /kaggle/temp/, but they won't be saved outside of the current session

import seaborn as sns
import matplotlib.pyplot as plt

from IPython.display import set_matplotlib_formats
set_matplotlib_formats("retina")

plt.style.use("seaborn-whitegrid")

raw = pd.read_csv(r"../input/kaggle-survey-2020/kaggle_survey_2020_responses.csv", low_memory=False)
raw.shape

raw.head()

question = raw.iloc[0] # ì¸ë±ìŠ¤ ê°’ì´ ë¬¸ìë‚˜ ë‹¤ë¥¸ ê°’ì´ì–´ë„ ì²«ë²ˆì§¸ í–‰ì„ ê°€ì ¸ì˜¨ë‹¤.
question

answer = raw.drop([0]) # ë‚˜ë¨¸ì§€ ë‚´ìš©ì„ ë‚˜íƒ€ë‚´ì¤€ë‹¤ axis 0ì€ í–‰ axis 1ì€ ì—´
answer

answer.info()

Q1 What is your age (# years)?

question["Q1"]

answer["Q1"].value_counts(normalize = True) # ë¹ˆë„ìˆ˜ í™•ì¸ ê°€ëŠ¥(value_counts()) normalize = True ë¹„ìœ¨ì„ ì•Œìˆ˜ìˆìŒ

answer["Q1"].value_counts().sort_index() # ì¸ë±ìŠ¤ ìˆœìœ¼ë¡œ ë‚˜ì—´
answer["Q1"].value_counts().sort_index().plot() # ê·¸ë˜í”„ë„ ê°€ëŠ¥

# sns.countplot(data=answer,x="Q1") # ì •ë ¬ì´ ì•ˆë˜ìˆìŒ.
sns.countplot(data=answer.sort_values("Q1"),x="Q1")# í° ìˆœìœ¼ë¡œ ì •ë ¬í•œ ëª¨ì–‘
sns.countplot(data=answer.sort_values("Q1"),x="Q1") .set_title(question["Q1"]) # ì œëª© ìƒì„±

Q1 = answer['Q1'].value_counts().sort_index()
sns.countplot(data=answer.sort_values("Q1"), x="Q1", 
              palette="Blues_r").set_title(question["Q1"]) # íŒ”ë ˆíŠ¸ ì½”ë“œë¡œ ìƒ‰ê¹”ì„ ì§„í•œìˆœë¶€í„° ì˜…ì€ìˆœìœ¼ë¡œ ìƒì„±(Blues_r)

Q2 What is your gender? - Selected Choice
question_no = "Q2"
Q2 = answer[question_no].value_counts()
Q2

sns.countplot(data=answer, 
              y=question_no).set_title(question[question_no])

q1q2 = pd.crosstab(answer["Q1"], answer["Q2"])
q1q2[["Man", "Woman"]].plot.bar(rot=0)

q1q2[["Man", "Woman"]].sort_index(ascending=False).plot.barh(figsize=(10, 6), title="Age & Gender")

plt.figure(figsize=(10, 6))
sns.countplot(data=answer.sort_values("Q1"), x="Q1", hue="Q2").set_title("Age & Gender")

Q3 In which country do you currently reside?

# answer["Q1"].value_counts().index # ë¹ˆë„ìˆ˜ê°€ ë§ì€ ìˆœì„œëŒ€ë¡œ indexë§Œ ë½‘ìŒ
q1_cols=answer["Q1"].value_counts().sort_index().index.tolist()# ì¸ë±ìŠ¤ê°’ìˆœìœ¼ë¡œ ì •ë ¬í•´ì„œ ì¸ë±ìŠ¤ë§Œ ë½‘ê³  ë¦¬ìŠ¤íŠ¸í˜•ì‹ìœ¼ë¡œ ë°”ê¿”ì¤Œ
q1_cols

def show_countplot_by_qno(qno,fsize=(10,6),order=None): # í•¨ìˆ˜ ì •ì˜ fsize = ê·¸ë˜í”„ í¬ê¸° order ê°’ì´ ì—†ìœ¼ë©´ ë¹ˆë„ìˆ˜ ë†’ì€ìˆœìœ¼ë¡œ ì •ë ¬
    if not order:
        order= answer[qno].value_counts().index # ë¹ˆë„ìˆ˜ê°€ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
    
    plt.figure(figsize=fsize) # ê·¸ë˜í”„ ì‚¬ì´ì¦ˆ ì •ì˜ mapplot
    sns.countplot(data=answer, y=qno,
                  order=order , palette="Blues_r",
                 ).set_title(question[qno]) # ì œëª© ì¶”ê°€set_title()
    
show_countplot_by_qno("Q6") # fsize ë³€ê²½ ê°€ëŠ¥! q1~q6ê¹Œì§€ ê°€ëŠ¥

# ì˜¤ëŠ˜ì˜ ì½”ë”© ìœ„ì™€ ê°™ì€í•¨ìˆ˜
def show_countplot_by_qno(qno, fsize=(10, 6), order=None):
    """
    qno : question_no, ex) Q12
    fsize : figsize default (10, 6)
    order : optional order list, default value_counts().index
    """
    if not order :
        order = answer[qno].value_counts().index
        
    plt.figure(figsize=fsize)
    sns.countplot(data=answer, 
                  y=qno,
                  order=order,
                  palette="Blues_r"
                 ).set_title(question[qno])
show_countplot_by_qno? # ?í•˜ë©´ í•¨ìˆ˜ì˜ ë‚´ìš©ì„ ì•Œ ìˆ˜ ìˆìŒ.
show_countplot_by_qno("Q3", fsize=(12, 12))

Q4 ğŸ“ What is the highest level of formal education that you have attained or plan to attain within the next 2 years?

show_countplot_by_qno("Q4")

Q5 Select the title most similar to your current role (or most recent title if retired):

show_countplot_by_qno("Q5")

Q6 For how many years have you been writing code and/or programming?

show_countplot_by_qno("Q6")
q6_cols = ['I have never written code', '< 1 years', '1-2 years', '3-5 years', '5-10 years',  
       '10-20 years', '20+ years']
show_countplot_by_qno("Q6", order=q6_cols)

Q7 What programming languages do you use on a regular basis? (Select all that apply)
ğŸ¼ pandas filter & describe ğŸ—‚ # main point Q7ë¶€í„°ëŠ” ë‹¤ì¤‘ìœ¼ë¡œ ëŒ€ë‹µì´ ìˆê¸°ë•Œë¬¸ì— ë‹¤ë¥´ê²Œ ë¶„ì„

question.filter(regex="Q7")[0].split("-")[0] # í•„í„°ë¥¼ ì‚¬ìš©í•˜ê³  regexë¥¼ ì´ìš© Q7ì˜ ë‚´ìš©ì„ í™•ì¸í•˜ê³  [0]ì€ ê·¸ì¤‘ ì²«ë²ˆì§¸ splitì„ í†µí•˜ì—¬ ì˜ë¼ì¤€ë’¤ ì²« ë²ˆì§¸ ê°’ í˜¸ì¶œ
question.filter(regex="Q7")[0].split("-")[0]
answer_Q7 = answer.filter(regex="Q7") # pandasì˜ filterë¥¼ ì´ìš© regexëŠ” regularexpresionì˜ ì•½ìë¡œ ì •ê·œí‘œí˜„ì‹ ì‚¬ìš©
answer_Q7
answer_Q7.notnull() # ê²°ì¸¡ì¹˜ëŠ” False ì•„ë‹Œê°’ì€ True
answer_Q7_desc = answer_Q7.describe() # describe ê¸°ìˆ í†µê³„ë¥¼ ì•Œë ¤ì¤Œ ê²°ì¸¡ì¹˜ë¥¼ ì œì™¸
answer_Q7_desc.loc[["top","count"]].T.set_index("top").plot.bar() 
# top,countë¥¼ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ locë¡œ ì¸ë±ì‹±í•˜ê³  .T(trans)ë¡œ í–‰ê³¼ì—´ êµì²´ í›„ index topì„ ë¶€ë¥¸ í›„ ê·¸ë˜í”„í•œ ê²ƒ 
# .Të¥¼ í•´ì¤€ ì´ìœ ëŠ” index topì„ ë¶€ë¥´ë©´ ì—´ì˜ ìœ„ì¹˜ê°€ ì•„ë‹ˆê³  ì˜¤ë¥˜ê°€ ë‚˜ê¸° ë•Œë¬¸ì— ë°”ê¿”ì¤€ë‹¤.
answer_Q7_desc = answer_Q7.describe()
answer_Q7_desc
answer_Q7_count = answer_Q7_desc.loc[["top", "count"]].T
answer_Q7_count = answer_Q7_count.set_index("top")
answer_Q7_count = answer_Q7_count.sort_values("count", ascending=False)
answer_Q7_count
q7_title=question.filter(regex="Q7")[0].split("-")[0] # ì œëª© ê°€ì ¸ì˜¤ê¸°
sns.barplot(data=answer_Q7_count, y=answer_Q7_count.index,x="count",palette="Reds_r").set_title(q7_title)

How to get title in multiple choice question
q7_title = question.filter(regex="Q7")[0].split("-")[0]
sns.barplot(data=answer_Q7_count, 
            y=answer_Q7_count.index, x="count", palette="Blues_r").set_title(q7_title)

















